<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>博尔赫斯的诗歌：我用什么才能留住你</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/9.5.2/math.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: "Times New Roman", Times, serif;
            font-size: 12pt;
            line-height: 1.5;
            margin: 0 auto; /* 居中对齐 */
            text-align: justify;
            max-width: 45%; /* 设置最大宽度为60% */
            padding: 2.54cm 0; /* 保持上下边距，移除左右边距 */
        }
        .title {
            font-size: 16pt;
            font-weight: bold;
            text-align: center;
            margin-bottom: 24pt;
        }
        .author {
            font-size: 12pt;
            text-align: center;
            margin-bottom: 24pt;
        }
        .abstract {
            font-size: 10pt;
            margin-bottom: 24pt;
        }
        .abstract-title {
            font-weight: bold;
            text-align: center;
            margin-bottom: 12pt;
        }
        .section-title {
            font-size: 12pt;
            font-weight: bold;
            margin-top: 24pt;
            margin-bottom: 12pt;
        }
        .poem {
            margin-left: 2em;
            white-space: pre-wrap;
        }
        .chart-container {
            width: 20vw; /* 30% of the viewport width */
            display: inline-block; /* Display charts side by side */
            vertical-align: top; /* Align charts to the top */
            margin: 10px; /* Add some margin between charts */
        }
        .input-container {
            margin: 10px 0;
        }
        input[type="number"] {
            border: none;
            border-bottom: 1px solid black;
            font-family: "Times New Roman", Times, serif;
            font-style: italic;
            font-size: 1em;
            padding: 5px;
            width: 50%;
        }
        input[type="number"]:focus {
            outline: none;
            border-bottom: 2px solid black;
        }
        table {
            border-collapse: collapse;
            width: 100%;
            margin-bottom: 24pt;
        }
        th, td {
            border: none;
            padding: 8px;
            text-align: left;
        }
        thead {
            border-top: 2px solid black;
            border-bottom: 1px solid black;
        }
        tbody {
            border-bottom: 2px solid black;
        }
        /* 当屏幕宽度小于768px时，设置body宽度为100% */
        @media (max-width: 768px) {
            body {
                max-width: 90%;
            }
            .chart-container {
                width: 40vw; /* 30% of the viewport width */
            }
        }
    </style>
</head>
<body>
    <div class="title">博尔赫斯的诗歌：我用什么才能留住你</div>
    <div class="author">作者：张三</div>
    
    <div class="abstract">
        <div class="abstract-title">摘要</div>
        <p>本文展示了阿根廷著名作家豪尔赫·路易斯·博尔赫斯的诗歌《我用什么才能留住你》。这首诗以其深刻的情感和优美的语言著称，探讨了爱情、时间和永恒的主题。</p>
    </div>

    <div class="section-title">1. 引言</div>
    <p>豪尔赫·路易斯·博尔赫斯（Jorge Luis Borges，1899-1986）是20世纪最具影响力的作家之一。他的作品以其独特的想象力、哲学深度和文学技巧而闻名。《我用什么才能留住你》是他众多优秀作品中的一首，展现了诗人对爱情的深刻思考。</p>

    <div class="section-title">2. 诗歌内容</div>
    <p>以下是《我用什么才能留住你》的内容：</p>
    <div class="poem">
我用什么才能留住你？
我给你瘦落的街道、绝望的落日、荒郊的月亮。
我给你一个久久地望着孤月的人的悲哀。
    </div>

    <div class="section-title">3. 结论</div>
    <p>博尔赫斯的这首诗以其独特的视角和深刻的情感打动了无数读者。诗中列举了诗人愿意给予所爱之人的一切，包括物质的、精神的、历史的和个人的元素，展现了爱情的深度和广度。这首诗不仅是一首情诗，更是对人生、历史和存在本质的深刻思考。</p>
    
    <div class="section-title">4. 计算和绘图功能</div>
    <p>博尔赫斯的这首诗以其独特的视角和深刻的情感打动了无数读者。诗中列举了诗人愿意给予所爱之人的一切，包括物质的、精神的、历史的和个人的元素，展现了爱情的深度和广度。这首诗不仅是一首情诗，更是对人生、历史和存在本质的深刻思考。</p>
    
    <div class="input-container">
        <label for="investment">Annual Investment (x):</label>
        <input type="number" id="investment" placeholder="Enter annual investment x" value="8">
    </div>
    <div class="input-container">
        <label for="rate">Return Rate (y) %:</label>
        <input type="number" id="rate" placeholder="Enter return rate y (%)" value="7">
    </div>
    <div class="input-container">
        <label for="years">Number of Years (n):</label>
        <input type="number" id="years" placeholder="Enter number of years n" value="20">
    </div>
    <div class="result-container">
        <p id="result">Estimated year (m) when annual net return equals annual investment: <span id="year-m"></span></p>
    </div>
    <div class="charts-wrapper">
        <div class="chart-container">
            <canvas id="chart1" width="400" height="400"></canvas>
        </div>
        <div class="chart-container">
            <canvas id="chart2" width="400" height="400"></canvas>
        </div>
    </div>

    <script>
        document.getElementById('investment').addEventListener('input', plotInvestmentReturns);
        document.getElementById('rate').addEventListener('input', plotInvestmentReturns);
        document.getElementById('years').addEventListener('input', plotInvestmentReturns);

        const ctx1 = document.getElementById('chart1').getContext('2d');
        const chart1 = new Chart(ctx1, {
            type: 'line',
            data: {
                labels: [], // x values will be set dynamically
                datasets: [
                    {
                        label: 'Total Returns (s)',
                        data: [],
                        borderColor: 'black', // Total returns line color
                        borderWidth: 2,
                        fill: false
                    },
                    {
                        label: 'Total Investment (z)',
                        data: [],
                        borderColor: 'gray', // Total investment line color
                        borderWidth: 2,
                        fill: false
                    }
                ]
            },
            options: {
                scales: {
                    x: {
                        type: 'linear',
                        position: 'bottom',
                        min: 0,
                        max: 20,
                        grid: {
                            color: 'black' // x-axis color
                        },
                        ticks: {
                            color: 'black' // x-axis tick color
                        }
                    },
                    y: {
                        grid: {
                            color: 'black' // y-axis color
                        },
                        ticks: {
                            color: 'black' // y-axis tick color
                        }
                    }
                }
            }
        });

        const ctx2 = document.getElementById('chart2').getContext('2d');
        const chart2 = new Chart(ctx2, {
            type: 'line',
            data: {
                labels: [], // x values will be set dynamically
                datasets: [
                    {
                        label: 'Annual Net Returns',
                        data: [],
                        borderColor: 'black', // Annual net returns line color
                        borderWidth: 2,
                        fill: false
                    },
                    {
                        label: 'Annual Investment',
                        data: [],
                        borderColor: 'gray', // Annual investment line color
                        borderWidth: 2,
                        fill: false
                    }
                ]
            },
            options: {
                scales: {
                    x: {
                        type: 'linear',
                        position: 'bottom',
                        min: 0,
                        max: 20,
                        grid: {
                            color: 'black' // x-axis color
                        },
                        ticks: {
                            color: 'black' // x-axis tick color
                        }
                    },
                    y: {
                        grid: {
                            color: 'black' // y-axis color
                        },
                        ticks: {
                            color: 'black' // y-axis tick color
                        }
                    }
                }
            }
        });

        function plotInvestmentReturns() {
            const x = parseFloat(document.getElementById('investment').value) || 8; // default to 8 if x is not valid
            const y = parseFloat(document.getElementById('rate').value) / 100 || 0.07; // default to 7% if y is not valid
            const n = parseInt(document.getElementById('years').value, 10) || 20; // default to 10 if n is not valid

            const returns = [];
            const investments = [];
            const annualNetReturns = [];
            const annualInvestments = [];
            let yearM = null;

            for (let i = 0; i <= n; i++) {
                const totalReturn = x * ((Math.pow(1 + y, i) - 1) / y);
                const totalInvestment = x * i;
                returns.push({x: i, y: totalReturn});
                investments.push({x: i, y: totalInvestment});
                annualInvestments.push({x: i, y: x});
                if (i > 0) {
                    const previousReturn = x * ((Math.pow(1 + y, i - 1) - 1) / y);
                    const annualNetReturn = totalReturn - previousReturn - x;
                    annualNetReturns.push({x: i, y: annualNetReturn});
                    if (annualNetReturn >= x && yearM === null) {
                        yearM = i;
                    }
                } else {
                    annualNetReturns.push({x: i, y: 0});
                }
            }

            chart1.data.labels = returns.map(point => point.x);
            chart1.data.datasets[0].data = returns;
            chart1.data.datasets[1].data = investments;
            chart1.options.scales.x.max = n;
            chart1.update();

            chart2.data.labels = annualNetReturns.map(point => point.x);
            chart2.data.datasets[0].data = annualNetReturns;
            chart2.data.datasets[1].data = annualInvestments;
            chart2.options.scales.x.max = n;
            chart2.update();

            document.getElementById('year-m').textContent = yearM !== null ? yearM : 'Not reached within the given years';
        }

        // Initial plot with default values
        plotInvestmentReturns();
    </script>

    <div class="section-title">5. 诗歌主题分析</div>
    <table>
        <thead>
            <tr>
                <th>主题</th>
                <th>描述</th>
                <th>诗中体现</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>爱情</td>
                <td>诗人对所爱之人的深情</td>
                <td>"我用什么才能留住你？"</td>
            </tr>
            <tr>
                <td>时间</td>
                <td>过去、现在和未来的交织</td>
                <td>"我给你早在你出生前多年的一个傍晚看到的一朵黄玫瑰的记忆。"</td>
            </tr>
            <tr>
                <td>历史</td>
                <td>个人和家族的历史记忆</td>
                <td>"我给你我已死去的祖辈，后人们用大理石祭奠的先魂"</td>
            </tr>
        </tbody>
    </table>

    <div class="section-title">参考文献</div>
    <p>[1] 博尔赫斯. 博尔赫斯诗选[M]. 北京: 人民文学出版社, 2015.</p>
</body>
</html>
